<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>南航主桌 - 簡潔雙視角版 (含單位)</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; background: #f0f0f0; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        
        /* 控制區 */
        .controls {
            background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            width: 95%; max-width: 1100px; margin-bottom: 20px; text-align: center;
        }
        .btn-group { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; }
        .btn {
            padding: 15px 40px; font-size: 20px; font-weight: bold; border: none; border-radius: 50px; cursor: pointer; transition: 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn-director { background: #e74c3c; color: white; } /* 局長紅 */
        .btn-chief { background: #2c3e50; color: white; } /* 主任藍 */
        .btn:hover { transform: scale(1.05); opacity: 0.9; }
        .btn.active { ring: 4px solid #ffd700; box-shadow: 0 0 15px rgba(0,0,0,0.3); }

        /* 輸入區網格 (調整為顯示單位/職稱/姓名) */
        .input-area { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; text-align: left; }
        .input-group { background: #f8f9fa; padding: 10px; border-radius: 6px; border: 1px solid #e9ecef; }
        .input-group label { font-size: 13px; color: #555; font-weight: 900; display: block; margin-bottom: 5px; }
        
        .input-row { display: flex; gap: 5px; }
        /* 單位輸入框 */
        .input-unit { width: 45%; padding: 5px; border: 1px solid #ccc; border-radius: 4px; font-size: 12px; color: #666; }
        /* 職稱輸入框 */
        .input-title { width: 25%; padding: 5px; border: 1px solid #ccc; border-radius: 4px; font-size: 12px; }
        /* 姓名輸入框 */
        .input-name { width: 30%; padding: 5px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; font-weight: bold; }

        /* 桌子顯示區 */
        .table-container {
            position: relative; width: 750px; height: 750px;
            background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }

        /* 圓桌 */
        .main-table {
            width: 400px; height: 400px;
            background: #e6cea0; border: 10px solid #a67c52; border-radius: 50%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 1; transition: transform 0.8s ease;
        }
        .table-text { font-size: 60px; font-weight: 900; color: #5d4037; opacity: 0.8; }
        .current-view-text { font-size: 20px; color: #a67c52; font-weight: bold; margin-top: 10px; }

        /* 座位容器 (負責旋轉) */
        .seats-layer {
            position: absolute; width: 100%; height: 100%;
            transition: transform 0.8s ease; /* 平滑旋轉 */
        }

        /* 座位圓圈 */
        .seat {
            position: absolute; width: 130px; height: 130px;
            background: white; border: 3px solid #555; border-radius: 50%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            left: 50%; top: 50%; margin-left: -65px; margin-top: -65px; /* 居中修正 */
        }
        
        /* 座位內容 */
        .seat-content {
            width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: transform 0.8s ease;
        }

        /* 內容樣式 */
        .unit { font-size: 11px; color: #555; font-weight: bold; line-height: 1.1; margin-bottom: 2px; width: 95%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .title { font-size: 12px; color: #888; font-weight: bold; line-height: 1.2; margin-bottom: 2px; }
        .name { font-size: 18px; color: #000; font-weight: 900; }

        /* 特別標示 */
        .seat.target { border-color: #2980b9; background: #fff0f0; transform: scale(1.1); z-index: 10; }
        .seat.target .name { color: #2980b9; }

        @media print {
            .controls { display: none; }
            .table-container { box-shadow: none; border: 1px solid #eee; }
        }
    </style>
</head>
<body>

    <div class="controls">
        <div class="btn-group">
            <button class="btn btn-director" onclick="switchView(0, '葉協隆 局長')">⬇️ 局長視角</button>
            <button class="btn btn-chief" onclick="switchView(6, '張博彥 主任')">⬇️ 主任視角</button>
        </div>
        
        <div class="input-area">
            <div class="input-group"><label>1. 局長 (主人)</label>
                <div class="input-row"><input class="input-unit" id="u0" value="交通部航港局"><input class="input-title" id="t0" value="局長"><input class="input-name" id="n0" value="葉協隆" oninput="updateNames()"></div>
            </div>
            <div class="input-group"><label>2. 港警</label>
                <div class="input-row"><input class="input-unit" id="u1" value="高雄港警總隊"><input class="input-title" id="t1" value="總隊長"><input class="input-name" id="n1" value="廖國政" oninput="updateNames()"></div>
            </div>
            <div class="input-group"><label>3. 疾管署</label>
                <div class="input-row"><input class="input-unit" id="u2" value="疾管署高屏管制中心"><input class="input-title" id="t2" value="主任"><input class="input-name" id="n2" value="王任鑫" oninput="updateNames()"></div>
            </div>
            <div class="input-group"><label>4. 消防</label>
                <div class="input-row"><input class="input-unit" id="u3" value="港務消防大隊"><input class="input-title" id="t3" value="副大隊長"><input class="input-name" id="n3" value="戴國仰" oninput="updateNames()"></div>
            </div>
            <div class="input-group"><label>5. 驗船</label>
                <div class="input-row"><input class="input-unit" id="u4" value="驗船中心"><input class="input-title" id="t4" value="處長"><input class="input-name" id="n4" value="高世榮" oninput="updateNames()"></div>
            </div>
            <div class="input-group"><label>6. 輪船公會</label>
                <div class="input-row"><input class="input-unit" id="u5" value="國際輪船公會"><input class="input-title" id="t5" value="理事長"><input class="input-name" id="n5" value="吳岳峯" oninput="updateNames()"></div>
            </div>
            <div class="input-group"><label>7. 主任 (對面)</label>
                <div class="input-row"><input class="input-unit" id="u6" value="南部航務中心"><input class="input-title" id="t6" value="主任"><input class="input-name" id="n6" value="張博彥" oninput="updateNames()"></div>
            </div>
            <div class="input-group"><label>8. 前主秘</label>
                <div class="input-row"><input class="input-unit" id="u7" value="前主秘"><input class="input-title" id="t7" value=""><input class="input-name" id="n7" value="余建勳" oninput="updateNames()"></div>
            </div>
            <div class="input-group"><label>9. 裝卸</label>
                <div class="input-row"><input class="input-unit" id="u8" value="裝卸公會"><input class="input-title" id="t8" value="理事長"><input class="input-name" id="n8" value="黃德成" oninput="updateNames()"></div>
            </div>
            <div class="input-group"><label>10. 引水</label>
                <div class="input-row"><input class="input-unit" id="u9" value="引水人辦事處"><input class="input-title" id="t9" value="主任"><input class="input-name" id="n9" value="陳策勤" oninput="updateNames()"></div>
            </div>
            <div class="input-group"><label>11. 倉庫</label>
                <div class="input-row"><input class="input-unit" id="u10" value="倉庫公會"><input class="input-title" id="t10" value="理事長"><input class="input-name" id="n10" value="駱啟明" oninput="updateNames()"></div>
            </div>
            <div class="input-group"><label>12. 船代</label>
                <div class="input-row"><input class="input-unit" id="u11" value="船代公會"><input class="input-title" id="t11" value="理事長"><input class="input-name" id="n11" value="顏銘傳" oninput="updateNames()"></div>
            </div>
        </div>
    </div>

    <div class="table-container">
        <div class="main-table">
            <div class="table-text">主 桌</div>
            <div class="current-view-text" id="viewLabel">目前：局長視角</div>
        </div>

        <div class="seats-layer" id="seatsLayer">
            </div>
    </div>

<script>
    // 半徑
    const radius = 280; 
    const seatsLayer = document.getElementById('seatsLayer');
    const viewLabel = document.getElementById('viewLabel');

    // 初始化
    function init() {
        // 產生 12 個座位 DOM
        for (let i = 0; i < 12; i++) {
            const seat = document.createElement('div');
            seat.className = 'seat';
            seat.id = `seat-${i}`;
            
            // 內部文字容器
            const content = document.createElement('div');
            content.className = 'seat-content';
            content.id = `content-${i}`;
            
            // 初始 HTML
            content.innerHTML = `<div class="unit">單位</div><div class="title">職稱</div><div class="name">姓名</div>`;
            seat.appendChild(content);
            seatsLayer.appendChild(seat);
        }
        updateNames(); // 填入名字
        switchView(0, '葉協隆 局長'); // 預設局長視角
    }

    // 更新名字 (讀取 Unit/Title/Name)
    function updateNames() {
        for (let i = 0; i < 12; i++) {
            const unit = document.getElementById(`u${i}`).value;
            const title = document.getElementById(`t${i}`).value;
            const name = document.getElementById(`n${i}`).value;
            
            const contentDiv = document.getElementById(`content-${i}`);
            // 職稱若為空，微調顯示
            const titleHtml = title ? `<div class="title">${title}</div>` : '';
            
            contentDiv.innerHTML = `<div class="unit">${unit}</div>${titleHtml}<div class="name">${name}</div>`;
        }
    }

    // 切換視角核心邏輯
    function switchView(targetIndex, labelText) {
        viewLabel.innerText = "目前：" + labelText;

        // 計算旋轉角度 (targetIndex 轉到 180度/正下方)
        const rotation = 180 - (targetIndex * 30);
        
        // 1. 旋轉整個盤子
        seatsLayer.style.transform = `rotate(${rotation}deg)`;

        // 2. 重新計算每個座位的內部文字反轉，並定位座位
        for (let i = 0; i < 12; i++) {
            const seat = document.getElementById(`seat-${i}`);
            const content = document.getElementById(`content-${i}`);
            
            // 每個座位在盤子上的固定角度 (0, 30, 60...)
            const seatAngle = i * 30;
            
            // 定位：將座位推到半徑處
            seat.style.transform = `rotate(${seatAngle}deg) translate(0, -${radius}px)`;
            
            // 文字反轉：必須抵消「盤子的旋轉」+「座位自身的角度」
            content.style.transform = `rotate(${-(rotation + seatAngle)}deg)`;

            // 標示當前視角的主角
            if (i === targetIndex) {
                seat.classList.add('target');
            } else {
                seat.classList.remove('target');
            }
        }
    }

    // 綁定輸入框更新事件
    document.querySelectorAll('input').forEach(input => {
        input.addEventListener('input', updateNames);
    });

    init();
</script>

</body>
</html>
